language: php

sudo: false

php:
  - 7.0
  - 7.1

env:
  global:
    - CAKE_VERSION=^3.0.0

  matrix:
    - CAKE_VERSION=~3.4.0
    - CAKE_VERSION=~3.5.0

matrix:
  include:
    - php: 7.1
      env:
        - PHP_SYNTAX=1
    - php: 7.1
      env:
        - PHP_CS=1
    - php: 7.1
      env:
        - PHP_CPD=1
    - php: 7.1
      env:
        - PHP_MD=1
    - php: 7.1
      env:
        - PHP_COVERAGE=1

branches:
  only:
    - master
    - 2.x
    - 3.x

before_script:
  - travis_wait ./.travis/before-script.sh

script:
  - ./.travis/script.sh

after_success:
  - ./.travis/after-success.sh

notifications:
  email: false
  hipchat:
    rooms:
      secure: dT3+gkzFXrRhGdugstwD8XNpY7m37KJ+ZbNFEqFvhGEWgcPD/9hgfPwubWfTMRiM/d2V1Lsc8yxQsDvvaktYUFH2KvTCjjrq5gMe9CSvnfoTkNwyWS1eRLOcBwOjLAWB8M5lN267CNPspG3qD6UVmk0ECUkyNcmRxzcPbis9mOM=
